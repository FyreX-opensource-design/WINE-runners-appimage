version: 1

script:
  # Remove any previous build cache data
  - rm -rf AppDir appimage-builder-cache/var/cache/apt/archives/*wine* || true
  - mkdir AppDir && cp wrapper AppDir
  # Add winetricks
  - wget -q "https://raw.githubusercontent.com/Winetricks/winetricks/master/src/winetricks" -P ./AppDir/bin && chmod +x ./AppDir/bin/winetricks
  # Copy App icon to AppDir/usr/share/icons needed prior to appimage-builder ver 1.x.x
  - mkdir -p AppDir/usr/share/icons ; cp doc/logo-wine.svg AppDir/usr/share/icons/wine.svg
  # Include runner
  - ./fetch.sh "BOTTLES_RUNNER"

AppDir:
  path: ./AppDir

  app_info:
    id: org.winehq.wine
    name: wine
    icon: wine
    version: staging
    exec: bin/bash
    exec_args: wrapper $@

  apt:
    arch: [amd64, i386]
    sources:
      - sourceline: 'deb http://archive.ubuntu.com/ubuntu/ jammy main restricted universe multiverse'
      - sourceline: 'deb http://archive.ubuntu.com/ubuntu/ jammy-updates main restricted universe multiverse'
      - sourceline: 'deb http://archive.ubuntu.com/ubuntu/ jammy-backports main restricted universe multiverse'
        key_url: 'http://keyserver.ubuntu.com/pks/lookup?op=get&search=0x871920D1991BC93C'
      - sourceline: 'deb https://dl.winehq.org/wine-builds/ubuntu/ jammy main'
        key_url: 'https://dl.winehq.org/wine-builds/winehq.key'

    include:
      - acl
      - adwaita-icon-theme
      - alsa-topology-conf
      - alsa-ucm-conf
      - at-spi2-core
      - avahi-daemon
      - bash
      - bind9-host
      - bind9-libs
      - cabextract
      - coreutils
      - dash
      - dbus
      - dbus-user-session
      - dconf-gsettings-backend
      - dconf-service
      - dmsetup
      - fontconfig
      - fontconfig-config
      - fonts-dejavu-core
      - gcc-12-base
      - gcc-12-base:i386
      - gir1.2-glib-2.0
      - gsettings-desktop-schemas
      - gstreamer1.0-alsa:i386
      - gstreamer1.0-gl:i386
      - gstreamer1.0-gtk3:i386
      - gstreamer1.0-libav:i386
      - gstreamer1.0-plugins-bad:i386
      - gstreamer1.0-plugins-base
      - gstreamer1.0-plugins-base:i386
      - gstreamer1.0-plugins-good:i386
      - gstreamer1.0-plugins-ugly:i386
      - gstreamer1.0-pulseaudio:i386
      - gstreamer1.0-qt5:i386
      - gstreamer1.0-tools:i386
      - gstreamer1.0-x:i386
      - hicolor-icon-theme
      - humanity-icon-theme
      - i965-va-driver
      - i965-va-driver:i386
      - intel-media-va-driver
      - intel-media-va-driver:i386
      - ipp-usb
      - iso-codes
      - krb5-locales
      - libapparmor1
      - libapparmor1:i386
      - libargon2-1
      - libasound2
      - libasound2-data
      - libasound2:i386
      - libasound2-plugins
      - libasound2-plugins:i386
      - libasyncns0
      - libasyncns0:i386
      - libatk1.0-0
      - libatk1.0-0:i386
      - libatk1.0-data
      - libatk-bridge2.0-0
      - libatk-bridge2.0-0:i386
      - libatomic1:i386
      - libatspi2.0-0
      - libatspi2.0-0:i386
      - libavahi-client3
      - libavahi-client3:i386
      - libavahi-common3
      - libavahi-common3:i386
      - libavahi-common-data
      - libavahi-common-data:i386
      - libavahi-core7
      - libblkid1:i386
      - libbrotli1:i386
      - libbsd0
      - libbsd0:i386
      - libbz2-1.0:i386
      - libc6
      - libc6:i386
      - libcairo2
      - libcairo2:i386
      - libcairo-gobject2
      - libcairo-gobject2:i386
      - libcap2-bin
      - libcap2:i386
      - libcdparanoia0
      - libcdparanoia0:i386
      - libcolord2
      - libcolord2:i386
      - libcom-err2
      - libcom-err2:i386
      - libcrypt1:i386
      - libcryptsetup12
      - libcups2
      - libcups2:i386
      - libcurl3-gnutls
      - libcurl3-gnutls:i386
      - libcurl4:i386
      - libdaemon0
      - libdatrie1
      - libdatrie1:i386
      - libdb5.3:i386
      - libdbus-1-3
      - libdbus-1-3:i386
      - libdconf1
      - libdecor-0-0
      - libdecor-0-0:i386
      - libdecor-0-plugin-1-cairo
      - libdecor-0-plugin-1-cairo:i386
      - libdeflate0:i386
      - libdevmapper1.02.1
      - libdrm2
      - libdrm2:i386
      - libdrm-amdgpu1
      - libdrm-amdgpu1:i386
      - libdrm-common
      - libdrm-intel1
      - libdrm-intel1:i386
      - libdrm-nouveau2
      - libdrm-nouveau2:i386
      - libdrm-radeon1
      - libdrm-radeon1:i386
      - libdw1
      - libdw1:i386
      - libedit2
      - libedit2:i386
      - libelf1
      - libelf1:i386
      - libepoxy0
      - libepoxy0:i386
      - libexif12
      - libexif12:i386
      - libexpat1
      - libexpat1:i386
      - libffi8:i386
      - libflac8
      - libflac8:i386
      - libfontconfig1
      - libfontconfig1:i386
      - libfreetype6
      - libfreetype6:i386
      - libfribidi0
      - libfribidi0:i386
      - libgbm1
      - libgbm1:i386
      - libgcc-s1
      - libgcc-s1:i386
      - libgcrypt20:i386
      - libgd3
      - libgd3:i386
      - libgdbm6
      - libgdbm6:i386
      - libgdbm-compat4
      - libgdbm-compat4:i386
      - libgdk-pixbuf-2.0-0:i386
      - libgirepository-1.0-1
      - libglapi-mesa
      - libglapi-mesa:i386
      - libglib2.0-0:i386
      - libglu1-mesa
      - libglu1-mesa:i386
      - libglvnd0
      - libglvnd0:i386
      - libgmp10:i386
      - libgnutls30
      - libgnutls30:i386
      - libgpg-error0:i386
      - libgpg-error-l10n
      - libgphoto2-6
      - libgphoto2-6:i386
      - libgphoto2-l10n
      - libgphoto2-port12
      - libgphoto2-port12:i386
      - libgpm2:i386
      - libgraphite2-3
      - libgraphite2-3:i386
      - libgssapi-krb5-2:i386
      - libgstreamer1.0-0
      - libgstreamer1.0-0:i386
      - libgstreamer1.0-dev
      - libgstreamer-plugins-bad1.0-dev:i386
      - libgstreamer-plugins-base1.0-0
      - libgstreamer-plugins-base1.0-0:i386
      - libgstreamer-plugins-base1.0-dev:i386
      - libgtk-3-0
      - libgtk-3-0:i386
      - libgtk-3-bin
      - libgtk-3-common
      - libharfbuzz0b
      - libharfbuzz0b:i386
      - libhogweed6:i386
      - libicu70:i386
      - libidn2-0:i386
      - libieee1284-3
      - libieee1284-3:i386
      - libigdgmm12
      - libigdgmm12:i386
      - libip4tc2
      - libjack-jackd2-0
      - libjack-jackd2-0:i386
      - libjbig0:i386
      - libjpeg8:i386
      - libjpeg-turbo8:i386
      - libjson-c5
      - libk5crypto3:i386
      - libkeyutils1:i386
      - libkmod2
      - libkrb5-3:i386
      - libkrb5support0:i386
      - liblcms2-2
      - liblcms2-2:i386
      - libldap-2.5-0:i386
      - libllvm13
      - libllvm13:i386
      - liblmdb0
      - libltdl7
      - libltdl7:i386
      - liblz4-1:i386
      - liblzma5:i386
      - libmaxminddb0
      - libmd0
      - libmd0:i386
      - libmount1:i386
      - libmpdec3
      - libncurses6:i386
      - libnettle8:i386
      - libnghttp2-14:i386
      - libnsl2:i386
      - libnspr4
      - libnspr4:i386
      - libnss3
      - libnss3:i386
      - libnss-mdns
      - libnss-nis:i386
      - libnss-nisplus:i386
      - libnss-systemd
      - libodbc1
      - libodbc1:i386
      - libodbc2
      - libodbc2:i386
      - libodbccr2
      - libodbccr2:i386
      - libogg0
      - libogg0:i386
      - libopenal1
      - libopenal1:i386
      - libopenal-data
      - libopengl0
      - libopengl0:i386
      - libopenjp2-7
      - libopenjp2-7:i386
      - libopus0
      - libopus0:i386
      - liborc-0.4-0
      - liborc-0.4-0:i386
      - libosmesa6
      - libosmesa6:i386
      - libp11-kit0:i386
      - libpam-cap
      - libpam-systemd
      - libpango-1.0-0
      - libpango-1.0-0:i386
      - libpangocairo-1.0-0
      - libpangocairo-1.0-0:i386
      - libpangoft2-1.0-0
      - libpangoft2-1.0-0:i386
      - libpcap0.8
      - libpcap0.8:i386
      - libpci3
      - libpci3:i386
      - libpciaccess0
      - libpciaccess0:i386
      - libpcre2-8-0
      - libpcre2-8-0:i386
      - libpcre3
      - libpcre3:i386
      - libperl5.34
      - libperl5.34:i386
      - libpixman-1-0
      - libpixman-1-0:i386
      - libpng16-16:i386
      - libpoppler118
      - libpoppler118:i386
      - libpoppler-glib8
      - libpoppler-glib8:i386
      - libpsl5:i386
      - libpulse0
      - libpulse0:i386
      - libpython3.10-minimal
      - libpython3.10-stdlib
      - libpython3-stdlib
      - libreadline8
      - librsvg2-2
      - librsvg2-2:i386
      - librsvg2-common
      - librsvg2-common:i386
      - librtmp1:i386
      - libsamplerate0
      - libsamplerate0:i386
      - libsane1
      - libsane1:i386
      - libsane-common
      - libsasl2-2:i386
      - libsasl2-modules-db:i386
      - libsasl2-modules:i386
      - libsdl2-2.0-0
      - libsdl2-2.0-0:i386
      - libselinux1:i386
      - libsensors5
      - libsensors5:i386
      - libsensors-config
      - libsndfile1
      - libsndfile1:i386
      - libsndio7.0
      - libsndio7.0:i386
      - libsnmp40
      - libsnmp40:i386
      - libsnmp-base
      - libsqlite3-0
      - libsqlite3-0:i386
      - libssh-4:i386
      - libssl3:i386
      - libstdc++6
      - libstdc++6:i386
      - libsystemd0
      - libsystemd0:i386
      - libtasn1-6:i386
      - libthai0
      - libthai0:i386
      - libthai-data
      - libtheora0
      - libtheora0:i386
      - libtiff5:i386
      - libtinfo6:i386
      - libtirpc3
      - libtirpc3:i386
      - libtirpc-common
      - libudev1
      - libudev1:i386
      - libunistring2:i386
      - libunwind8
      - libunwind8:i386
      - libusb-1.0-0
      - libusb-1.0-0:i386
      - libuuid1:i386
      - libuv1
      - libv4l-0
      - libv4l-0:i386
      - libv4lconvert0
      - libv4lconvert0:i386
      - libva2
      - libva2:i386
      - libva-drm2
      - libva-drm2:i386
      - libva-x11-2
      - libva-x11-2:i386
      - libvisual-0.4-0
      - libvisual-0.4-0:i386
      - libvorbis0a
      - libvorbis0a:i386
      - libvorbisenc2
      - libvorbisenc2:i386
      - libwayland-client0
      - libwayland-client0:i386
      - libwayland-cursor0
      - libwayland-cursor0:i386
      - libwayland-egl1
      - libwayland-egl1:i386
      - libwayland-server0
      - libwayland-server0:i386
      - libwebp7:i386
      - libwrap0
      - libwrap0:i386
      - libx11-6
      - libx11-6:i386
      - libx11-data
      - libx11-xcb1
      - libx11-xcb1:i386
      - libxau6
      - libxau6:i386
      - libxcb1
      - libxcb1:i386
      - libxcb-dri2-0
      - libxcb-dri2-0:i386
      - libxcb-dri3-0
      - libxcb-dri3-0:i386
      - libxcb-present0
      - libxcb-present0:i386
      - libxcb-render0
      - libxcb-render0:i386
      - libxcb-shm0
      - libxcb-shm0:i386
      - libxcb-sync1
      - libxcb-sync1:i386
      - libxcb-xfixes0
      - libxcb-xfixes0:i386
      - libxcomposite1
      - libxcomposite1:i386
      - libxcursor1
      - libxcursor1:i386
      - libxdamage1
      - libxdamage1:i386
      - libxdmcp6
      - libxdmcp6:i386
      - libxext6
      - libxext6:i386
      - libxfixes3
      - libxfixes3:i386
      - libxi6
      - libxi6:i386
      - libxinerama1
      - libxinerama1:i386
      - libxkbcommon0
      - libxkbcommon0:i386
      - libxml2:i386
      - libxpm4
      - libxpm4:i386
      - libxrandr2
      - libxrandr2:i386
      - libxrender1
      - libxrender1:i386
      - libxshmfence1
      - libxshmfence1:i386
      - libxss1
      - libxss1:i386
      - libxtst6
      - libxxf86vm1
      - libxxf86vm1:i386
      - libzstd1:i386
      - media-types
      - mesa-utils
      - mesa-va-drivers
      - mesa-va-drivers:i386
      - netbase
      - networkd-dispatcher
      - ocl-icd-libopencl1
      - ocl-icd-libopencl1:i386
      - pci.ids
      - perl
      - perl-base
      - perl-modules-5.34
      - poppler-data
      - python3
      - python3.10
      - python3.10-minimal
      - python3-dbus
      - python3-gi
      - python3-minimal
      - readline-common
      - sane-airscan
      - sane-utils
      - session-migration
      - systemd
      - systemd-hwe-hwdb
      - systemd-sysv
      - systemd-timesyncd
      - ubuntu-mono
      - ucf
      - udev
      - unionfs-fuse
      - update-inetd
      - uuid-runtime
      - va-driver-all
      - va-driver-all:i386
      - x11-common
      - xkb-data
      - zlib1g
      - zlib1g:i386

  runtime:
    path_mappings:
    - /opt/wine-staging:$APPDIR/opt/wine-staging

AppImage:
  update-information: gh-releases-zsync|mmtrt|WINE_AppImage|continuous-staging|wine-staging*.AppImage.zsync
  #sign-key: None
  arch: x86_64


